#                              total.sd=sd(Total,na.rm=TRUE))
# gender.summary.total$Total <- as.numeric(as.character(gender.summary.total$Total))
# gender.summary.total <- ddply(gender.mission.total, .(Date,Mission), summarise,
#                                    male.sum=sum(Male,na.rm=TRUE),
#                                    male.mean=mean(Male,na.rm=TRUE),
#                                    male.med=median(Male,na.rm=TRUE),
#                                    male.sd=sd(Male,na.rm=TRUE),
#                                    female.sum=sum(Female,na.rm=TRUE),
#                                    female.mean=mean(Female,na.rm=TRUE),
#                                    female.med=median(Female,na.rm=TRUE),
#                                    female.sd=sd(Female,na.rm=TRUE),
#                                    total.sum=sum(Total,na.rm=TRUE),
#                                    total.mean=mean(Total,na.rm=TRUE),
#                                    total.med=median(Total,na.rm=TRUE),
#                                    total.sd=sd(Total,na.rm=TRUE))
# tmp.cols <- c('Date','Type','Male','Male.mean','Male.med','Male.sd','Female','Female.mean','Female.med','Female.sd','Total','Total.mean','Total.med','Total.sd')
# colnames(gender.summary) <- tmp.cols
# tmp.cols <- c('Date','Male','Male.mean','Male.med','Male.sd','Female','Female.mean','Female.med','Female.sd','Total','Total.mean','Total.med','Total.sd')
# colnames(gender.summary.total) <- tmp.cols
# gender.summary$female.perc <- gender.summary$Female / gender.summary$Total
# gender.summary.total$female.perc <- gender.summary.total$Female / gender.summary.total$Total
#
# ############PLOTS?
#
#
#
# rm(gender.mission)
# rm(gender.tcc)
# rm(gender.summary)
# rm(gender.mission.total)
# rm(gender.tcc.total)
# rm(gender.summary.total)
# rm(tmp)
# rm(tmp.cols)
#
###################################
##FINAL OUTFILES
###################################
## Write out full csv with correct heading bindings
# Continent
data.cols <- c('Date', 'Continent', 'Number of Contributors', 'Troops', 'Police', 'Observers', 'Total')
colnames(data.full.continent) <- data.cols
write.csv(data.full.continent,'../ppp_files/data_continent.csv',row.names=FALSE)
rm(data.full.continent)
# Mission
data.cols <- c('Date', 'Mission', 'Country of Mission', 'Country of Mission ISO-3', 'Mission HQ', 'Mission HQ Longitude', 'Mission HQ Latitude', 'Mission Continent', 'Mission Region', 'Mission - NAM', 'Mission - G77', 'Mission - AU', 'Mission - Arab League', 'Mission - OIC', 'Mission - CIS', 'Mission - G20', 'Mission - EU', 'Number of Contributors', 'Troops', 'Police', 'Observers', 'Total')
colnames(data.full.mission) <- data.cols
write.csv(data.full.mission,'../ppp_files/data_mission.csv',row.names=FALSE)
rm(data.full.mission)
# Deployments by continent
data.cols <- c('Date', 'Continent', 'Number of Missions', 'Troops', 'Police', 'Observers', 'Total')
colnames(data.full.mission.continent) <- data.cols
write.csv(data.full.mission.continent,'../ppp_files/mission/continent_deployments.csv',row.names=FALSE)
rm(data.full.mission.continent)
# Deployments by region
data.cols <- c('Date', 'Continent', 'Region', 'Number of Missions', 'Troops', 'Police', 'Observers', 'Total')
colnames(data.full.mission.region) <- data.cols
write.csv(data.full.mission.region,'../ppp_files/mission/regionall_deployments.csv',row.names=FALSE)
rm(data.full.mission.region)
# Regions
data.cols <- c('Date', 'Region', 'Continent', 'Number of Contributors', 'Troops', 'Police', 'Observers', 'Total')
colnames(data.full.region.tcc) <- data.cols
colnames(data.full.region.tcc.africa) <- data.cols
colnames(data.full.region.tcc.americas) <- data.cols
colnames(data.full.region.tcc.asia) <- data.cols
colnames(data.full.region.tcc.europe) <- data.cols
colnames(data.full.region.tcc.oceania) <- data.cols
write.csv(data.full.region.tcc,'../ppp_files/data_regions.csv',row.names=FALSE)
write.csv(data.full.region.tcc.africa,'../ppp_files/regions/africa.csv',row.names=FALSE)
write.csv(data.full.region.tcc.americas,'../ppp_files/regions/americas.csv',row.names=FALSE)
write.csv(data.full.region.tcc.asia,'../ppp_files/regions/asia.csv',row.names=FALSE)
write.csv(data.full.region.tcc.europe,'../ppp_files/regions/europe.csv',row.names=FALSE)
write.csv(data.full.region.tcc.oceania,'../ppp_files/regions/oceania.csv',row.names=FALSE)
rm(data.full.region.tcc)
rm(data.full.region.tcc.africa)
rm(data.full.region.tcc.americas)
rm(data.full.region.tcc.asia)
rm(data.full.region.tcc.europe)
rm(data.full.region.tcc.oceania)
# Deployments by contributor
data.cols <- c('Date','Contributor','Contributor ISO-3','Contributor Capital Longitude','Contributor Capital Latitude','Contributor Continent','Contributor Region','Contributor UN Bloc','Contributor - P5, G4 or A3','Contributor - NAM','Contributor - G77','Contributor - AU','Contributor - Arab League', 'Contributor - OIC','Contributor - CIS','Contributor - G20','Contributor - EU','Number of Missions Contributed To','Troop Contributions','Average Troop Contribution','Median Troop Contribution','Troop Contributions - SD','Police Contributions','Average Police Contribution','Median Police Contribution','Police Contributions - SD','EOM Contributions','Average EOM Contribution','Median EOM Contribution','EOM Contributions - SD','Total Contributions','Average Total Contribution','Median Total Contribution','Total Contributions - SD')
colnames(data.full.tcc) <- data.cols
write.csv(data.full.tcc,'../ppp_files/data_tcc.csv',row.names=FALSE)
rm(data.full.tcc)
# Summary of P5 vs A3 vs G4 vs others
data.cols <- c('Date','Grouping','Troop Contributions','Average Troop Contribution','Median Troop Contribution','Troop Contributions - SD','Police Contributions','Average Police Contribution','Median Police Contribution','Police Contributions - SD','EOM Contributions','Average EOM Contribution','Median EOM Contribution','EOM Contributions - SD','Total Contributions','Average Total Contribution','Median Total Contribution','Total Contributions - SD')
colnames(data.summary.monthly.aspirant) <- data.cols
write.csv(data.summary.monthly.aspirant,'../ppp_files/summaries/aspirants.csv',row.names=FALSE)
rm(data.summary.monthly.aspirant)
# Monthly summary
data.cols <- c('Date','Number of Contributors','Troop Contributions','Average Troop Contribution','Median Troop Contribution','Troop Contributions - SD','Police Contributions','Average Police Contribution','Median Police Contribution','Police Contributions - SD','EOM Contributions','Average EOM Contribution','Median EOM Contribution','EOM Contributions - SD','Total Contributions','Average Total Contribution','Median Total Contribution','Total Contributions - SD')
colnames(data.summary.monthly.full) <- data.cols
write.csv(data.summary.monthly.full,'../ppp_files/data_monthly.csv',row.names=FALSE)
rm(data.summary.monthly.full)
# Monthly distribution summaries
data.cols <- c('Date','Number of Contributors','Troop Contributions','Average Troop Contribution','Median Troop Contribution','Troop Contributions - SD','Police Contributions','Average Police Contribution','Median Police Contribution','Police Contributions - SD','EOM Contributions','Average EOM Contribution','Median EOM Contribution','EOM Contributions - SD','Total Contributions','Average Total Contribution','Median Total Contribution','Total Contributions - SD','GINI - Troops','GINI - Total','First Quintile - Total','Second Quintile - Total','Third Quintile - Total','Fourth Quintile - Total','Fifth Quintile - Total','First Quintile - Troops','Second Quintile - Troops','Third Quintile - Troops','Fourth Quintile - Troops','Fifth Quintile - Troops')
colnames(data.summary.monthly.tcc) <- data.cols
write.csv(data.summary.monthly.tcc,'../ppp_files/summaries/distribution.csv',row.names=FALSE)
rm(data.summary.monthly.tcc)
rm(data.cols)
rm(data.full)
rm(gender.full)
rm(data.full.mission.region.africa)
rm(data.full.mission.region.americas)
rm(data.full.mission.region.asia)
rm(data.full.mission.region.europe)
rm(multiplot)
getwd()
?ggsave
??ggsave
# Set working directory to the current path
this.dir <- dirname(parent.frame(2)$ofile)
setwd(this.dir)
test <- require(reshape2)
if(test == FALSE) install.packages("reshape2")
require(reshape2)
test <- require(ggplot2)
if(test == FALSE) install.packages("ggplot2")
require(ggplot2)
test <- require(plyr)
if(test == FALSE) install.packages("plyr")
require(plyr)
test <- require(scales)
if(test == FALSE) install.packages("scales")
require(scales)
test <- require(RColorBrewer)
if(test == FALSE) install.packages("RColorBrewer")
require(RColorBrewer)
test <- require(reldist)
if(test == FALSE) install.packages("reldist")
require(reldist)
source("multiplot.R")
rm(test)
data.full <- read.csv("../ppp_files/full_data.csv")
gender.full <- read.csv("../ppp_files/full_gender_data.csv")
month.data <- read.csv("../ppp_files/current_month/current_month.csv")
data.full.col.names <- c('date','tcc','tcc.iso3.alpha','tcc.cap','tcc.cap.lat','tcc.cap.long','tcc.continent','tcc.unregion','tcc.unbloc','tcc.p5g4a3','tcc.nam','tcc.g77','tcc.au','tcc.arab.league','tcc.oic','tcc.cis','tcc.g20','tcc.eu','tcc.nato','tcc.g8','tcc.oecd','tcc.asean','tcc.oas','tcc.shanghai','tcc.gcc','tcc.uma','tcc.comesa','tcc.censad','tcc.eac','tcc.eccas','tcc.ecowas','tcc.igad','tcc.sadc','mission','mission.country','mission.iso3.alpha','mission.hq','mission.hq.long','mission.hq.lat','mission.continent','mission.un.region','mission.un.bloc','mission.p5g4a3','mission.nam','mission.g77','mission.au','mission.arab.league','mission.oic','mission.cis','mission.g20','mission.eu','mission.nato','mission.g8','mission.oecd','mission.asean','mission.oas','mission.shanghai','mission.gcc','mission.uma','mission.comesa','mission.censad','mission.eac','mission.eccas','mission.ecowas','mission.igad','mission.sadc','eom','fpu','ip','police','troops','observers','total')
gender.full.col.names <- c('date','tcc','tcc.iso3.alpha','mission','ip.M','ip.F','ip.T','fpu.M','fpu.F','fpu.T','eom.M','eom.F','eom.T','troops.M','troops.F','troops.T','total.M','total.F','total.T')
colnames(data.full) <- data.full.col.names
colnames(month.data) <- data.full.col.names
colnames(gender.full) <- gender.full.col.names
rm(data.full.col.names)
rm(gender.full.col.names)
data.full$date <- as.Date(data.full$date)
month.data$date <- as.Date(month.data$date)
gender.full$date <- as.Date(gender.full$date)
#set dummy variables as factors
data.full$tcc.nam <- as.factor(data.full$tcc.nam)
data.full$tcc.g77 <- as.factor(data.full$tcc.g77)
data.full$tcc.au <- as.factor(data.full$tcc.au)
data.full$tcc.arab.league <- as.factor(data.full$tcc.arab.league)
data.full$tcc.oic <- as.factor(data.full$tcc.oic)
data.full$tcc.cis <- as.factor(data.full$tcc.cis)
data.full$tcc.g20 <- as.factor(data.full$tcc.g20)
data.full$tcc.eu <- as.factor(data.full$tcc.eu)
data.full$tcc.nato <- as.factor(data.full$tcc.nato)
data.full$tcc.g8 <- as.factor(data.full$tcc.g8)
data.full$tcc.oecd <- as.factor(data.full$tcc.oecd)
data.full$tcc.asean <- as.factor(data.full$tcc.asean)
data.full$tcc.oas <- as.factor(data.full$tcc.oas)
data.full$tcc.shanghai <- as.factor(data.full$tcc.shanghai)
data.full$tcc.gcc <- as.factor(data.full$tcc.gcc)
data.full$tcc.uma <- as.factor(data.full$tcc.uma)
data.full$tcc.comesa <- as.factor(data.full$tcc.comesa)
data.full$tcc.censad <- as.factor(data.full$tcc.censad)
data.full$tcc.eac <- as.factor(data.full$tcc.eac)
data.full$tcc.eccas <- as.factor(data.full$tcc.eccas)
data.full$tcc.ecowas <- as.factor(data.full$tcc.ecowas)
data.full$tcc.igad <- as.factor(data.full$tcc.igad)
data.full$tcc.sadc <- as.factor(data.full$tcc.sadc)
data.full$mission.nam <- as.factor(data.full$mission.nam)
data.full$mission.g77 <- as.factor(data.full$mission.g77)
data.full$mission.au <- as.factor(data.full$mission.au)
data.full$mission.arab.league <- as.factor(data.full$mission.arab.league)
data.full$mission.oic <- as.factor(data.full$mission.oic)
data.full$mission.cis <- as.factor(data.full$mission.cis)
data.full$mission.g20 <- as.factor(data.full$mission.g20)
data.full$mission.eu <- as.factor(data.full$mission.eu)
data.full$mission.nato <- as.factor(data.full$mission.nato)
data.full$mission.g8 <- as.factor(data.full$mission.g8)
data.full$mission.oecd <- as.factor(data.full$mission.oecd)
data.full$mission.asean <- as.factor(data.full$mission.asean)
data.full$mission.oas <- as.factor(data.full$mission.oas)
data.full$mission.shanghai <- as.factor(data.full$mission.shanghai)
data.full$mission.gcc <- as.factor(data.full$mission.gcc)
data.full$mission.uma <- as.factor(data.full$mission.uma)
data.full$mission.comesa <- as.factor(data.full$mission.comesa)
data.full$mission.censad <- as.factor(data.full$mission.censad)
data.full$mission.eac <- as.factor(data.full$mission.eac)
data.full$mission.eccas <- as.factor(data.full$mission.eccas)
data.full$mission.ecowas <- as.factor(data.full$mission.ecowas)
data.full$mission.igad <- as.factor(data.full$mission.igad)
data.full$mission.sadc <- as.factor(data.full$mission.sadc)
month.data$tcc.nam <- as.factor(month.data$tcc.nam)
month.data$tcc.g77 <- as.factor(month.data$tcc.g77)
month.data$tcc.au <- as.factor(month.data$tcc.au)
month.data$tcc.arab.league <- as.factor(month.data$tcc.arab.league)
month.data$tcc.oic <- as.factor(month.data$tcc.oic)
month.data$tcc.cis <- as.factor(month.data$tcc.cis)
month.data$tcc.g20 <- as.factor(month.data$tcc.g20)
month.data$tcc.eu <- as.factor(month.data$tcc.eu)
month.data$tcc.nato <- as.factor(month.data$tcc.nato)
month.data$tcc.g8 <- as.factor(month.data$tcc.g8)
month.data$tcc.oecd <- as.factor(month.data$tcc.oecd)
month.data$tcc.asean <- as.factor(month.data$tcc.asean)
month.data$tcc.oas <- as.factor(month.data$tcc.oas)
month.data$tcc.shanghai <- as.factor(month.data$tcc.shanghai)
month.data$tcc.gcc <- as.factor(month.data$tcc.gcc)
month.data$tcc.uma <- as.factor(month.data$tcc.uma)
month.data$tcc.comesa <- as.factor(month.data$tcc.comesa)
month.data$tcc.censad <- as.factor(month.data$tcc.censad)
month.data$tcc.eac <- as.factor(month.data$tcc.eac)
month.data$tcc.eccas <- as.factor(month.data$tcc.eccas)
month.data$tcc.ecowas <- as.factor(month.data$tcc.ecowas)
month.data$tcc.igad <- as.factor(month.data$tcc.igad)
month.data$tcc.sadc <- as.factor(month.data$tcc.sadc)
month.data$mission.nam <- as.factor(month.data$mission.nam)
month.data$mission.g77 <- as.factor(month.data$mission.g77)
month.data$mission.au <- as.factor(month.data$mission.au)
month.data$mission.arab.league <- as.factor(month.data$mission.arab.league)
month.data$mission.oic <- as.factor(month.data$mission.oic)
month.data$mission.cis <- as.factor(month.data$mission.cis)
month.data$mission.g20 <- as.factor(month.data$mission.g20)
month.data$mission.eu <- as.factor(month.data$mission.eu)
month.data$mission.nato <- as.factor(month.data$mission.nato)
month.data$mission.g8 <- as.factor(month.data$mission.g8)
month.data$mission.oecd <- as.factor(month.data$mission.oecd)
month.data$mission.asean <- as.factor(month.data$mission.asean)
month.data$mission.oas <- as.factor(month.data$mission.oas)
month.data$mission.shanghai <- as.factor(month.data$mission.shanghai)
month.data$mission.gcc <- as.factor(month.data$mission.gcc)
month.data$mission.uma <- as.factor(month.data$mission.uma)
month.data$mission.comesa <- as.factor(month.data$mission.comesa)
month.data$mission.censad <- as.factor(month.data$mission.censad)
month.data$mission.eac <- as.factor(month.data$mission.eac)
month.data$mission.eccas <- as.factor(month.data$mission.eccas)
month.data$mission.ecowas <- as.factor(month.data$mission.ecowas)
month.data$mission.igad <- as.factor(month.data$mission.igad)
month.data$mission.sadc <- as.factor(month.data$mission.sadc)
### New Month Aggregations
## Regional deployment subset data
current.region.deploy <- ddply(month.data, .(mission.continent,mission.un.region),summarise,
n.missions = length(unique(mission)),
troops = sum(troops,na.rm=TRUE),
police = sum(police,na.rm=TRUE),
observers = sum(observers,na.rm=TRUE),
total = sum(total,na.rm=TRUE))
current.region.deploy$mission.perc <- current.region.deploy$n.missions / sum(current.region.deploy$n.missions)
current.region.deploy$troops.perc <- current.region.deploy$troops / sum(current.region.deploy$troops)
current.region.deploy$pol.perc <- current.region.deploy$police / sum(current.region.deploy$police)
current.region.deploy$obsv.perc <- current.region.deploy$observers / sum(current.region.deploy$observers)
current.region.deploy$tot.perc <- current.region.deploy$total / sum(current.region.deploy$total)
## Continent deployments subset data
current.continent.deploy <- ddply(month.data, .(mission.continent),summarise,
n.missions = length(unique(mission)),
troops = sum(troops,na.rm=TRUE),
police = sum(police,na.rm=TRUE),
observers = sum(observers,na.rm=TRUE),
total = sum(total,na.rm=TRUE))
current.continent.deploy$mission.perc <- current.continent.deploy$n.missions / sum(current.continent.deploy$n.missions)
current.continent.deploy$troops.perc <- current.continent.deploy$troops / sum(current.continent.deploy$troops)
current.continent.deploy$pol.perc <- current.continent.deploy$police / sum(current.continent.deploy$police)
current.continent.deploy$obsv.perc <- current.continent.deploy$observers / sum(current.continent.deploy$observers)
current.continent.deploy$tot.perc <- current.continent.deploy$total / sum(current.continent.deploy$total)
## Regional contributions subset data
current.region.cont <- ddply(month.data, .(tcc.continent,tcc.unregion),summarise,
troops = sum(troops,na.rm=TRUE),
police = sum(police,na.rm=TRUE),
observers = sum(observers,na.rm=TRUE),
total = sum(total,na.rm=TRUE))
current.region.cont$troops.perc <- current.region.cont$troops / sum(current.region.cont$troops)
current.region.cont$pol.perc <- current.region.cont$police / sum(current.region.cont$police)
current.region.cont$obsv.perc <- current.region.cont$observers / sum(current.region.cont$observers)
current.region.cont$tot.perc <- current.region.cont$total / sum(current.region.cont$total)
## Continent contributions subset data
current.continent.cont <- ddply(month.data, .(tcc.continent),summarise,
troops = sum(troops,na.rm=TRUE),
police = sum(police,na.rm=TRUE),
observers = sum(observers,na.rm=TRUE),
total = sum(total,na.rm=TRUE))
current.continent.cont$troops.perc <- current.continent.cont$troops / sum(current.continent.cont$troops)
current.continent.cont$pol.perc <- current.continent.cont$police / sum(current.continent.cont$police)
current.continent.cont$obsv.perc <- current.continent.cont$observers / sum(current.continent.cont$observers)
current.continent.cont$tot.perc <- current.continent.cont$total / sum(current.continent.cont$total)
## Continent contributions subset data
current.continent.cont <- ddply(month.data, .(tcc.continent),summarise,
troops = sum(troops,na.rm=TRUE),
police = sum(police,na.rm=TRUE),
observers = sum(observers,na.rm=TRUE),
total = sum(total,na.rm=TRUE))
current.continent.cont$troops.perc <- current.continent.cont$troops / sum(current.continent.cont$troops)
current.continent.cont$pol.perc <- current.continent.cont$police / sum(current.continent.cont$police)
current.continent.cont$obsv.perc <- current.continent.cont$observers / sum(current.continent.cont$observers)
current.continent.cont$tot.perc <- current.continent.cont$total / sum(current.continent.cont$total)
### Full Data Re-Aggregations
## Region aggregation from full
data.full.region.tcc <- ddply(data.full, .(date,tcc.unregion,tcc.continent), summarise,
n.contributors = length(unique(tcc)),
troops = sum(troops,na.rm=TRUE),
police = sum(police,na.rm=TRUE),
observers = sum(observers,na.rm=TRUE),
total = sum(total,na.rm=TRUE))
#replace 0's with NA's
data.full.region.tcc[] <- lapply(data.full.region.tcc, function(x){replace(x, x == 0, NA)})
## Regional subset
# Africa
data.full.region.tcc.africa <- data.full.region.tcc[which(data.full.region.tcc$tcc.continent=='Africa'),]
data.full.region.tcc.africa$tcc.unregion <- as.character(data.full.region.tcc.africa$tcc.unregion)
data.full.region.tcc.africa$tcc.unregion = factor(data.full.region.tcc.africa$tcc.unregion,
levels=c('Western Africa','Eastern Africa','Northern Africa','Southern Africa','Middle Africa'),
ordered=TRUE)
data.full.region.tcc.africa$tcc.continent <- as.character(data.full.region.tcc.africa$tcc.continent)
# Americas
data.full.region.tcc.americas <- data.full.region.tcc[which(data.full.region.tcc$tcc.continent=='South America' | data.full.region.tcc$tcc.continent=='North America'),]
data.full.region.tcc.americas$tcc.unregion <- as.character(data.full.region.tcc.americas$tcc.unregion)
data.full.region.tcc.americas$tcc.unregion = factor(data.full.region.tcc.americas$tcc.unregion,
levels=c('South America','Central America','Northern America','Caribbean'),
ordered=TRUE)
data.full.region.tcc.americas$tcc.continent <- as.character(data.full.region.tcc.americas$tcc.continent)
data.full.region.tcc.americas$tcc.continent <- as.factor(data.full.region.tcc.americas$tcc.continent)
# Asia
data.full.region.tcc.asia <- data.full.region.tcc[which(data.full.region.tcc$tcc.continent=='Asia'),]
data.full.region.tcc.asia$tcc.unregion <- as.character(data.full.region.tcc.asia$tcc.unregion)
data.full.region.tcc.asia$tcc.unregion = factor(data.full.region.tcc.asia$tcc.unregion,
levels=c('Southern Asia','Western Asia','South-Eastern Asia','Eastern Asia','Central Asia'),
ordered=TRUE)
data.full.region.tcc.asia$tcc.continent <- as.character(data.full.region.tcc.asia$tcc.continent)
# Europe
data.full.region.tcc.europe <- data.full.region.tcc[which(data.full.region.tcc$tcc.continent=='Europe'),]
data.full.region.tcc.europe$tcc.unregion <- as.character(data.full.region.tcc.europe$tcc.unregion)
data.full.region.tcc.europe$tcc.unregion = factor(data.full.region.tcc.europe$tcc.unregion,
levels=c('Southern Europe','Western Europe','Eastern Europe','Northern Europe'),
ordered=TRUE)
data.full.region.tcc.europe$tcc.continent <- as.character(data.full.region.tcc.europe$tcc.continent)
# Oceania
data.full.region.tcc.oceania <- data.full.region.tcc[which(data.full.region.tcc$tcc.continent=='Oceania'),]
data.full.region.tcc.oceania$tcc.unregion <- as.character(data.full.region.tcc.oceania$tcc.unregion)
data.full.region.tcc.oceania$tcc.unregion <- as.factor(data.full.region.tcc.oceania$tcc.unregion)
data.full.region.tcc.oceania$tcc.unregion = factor(data.full.region.tcc.oceania$tcc.unregion,
levels=c('Melanesia','Australia and New Zealand','Polynesia','Micronesia'),
ordered=TRUE)
data.full.region.tcc.oceania$tcc.continent <- as.character(data.full.region.tcc.oceania$tcc.continent)
## Continent aggregation from full
data.full.continent <- ddply(data.full, .(date,tcc.continent), summarise,
n.contributors = length(unique(tcc)),
troops = sum(troops,na.rm=TRUE),
police = sum(police,na.rm=TRUE),
observers = sum(observers,na.rm=TRUE),
total = sum(total,na.rm=TRUE))
## Country aggregation from full
data.full.tcc <- ddply(data.full, .(date,tcc,tcc.iso3.alpha,tcc.cap.long,tcc.cap.lat,tcc.continent,tcc.unregion,tcc.unbloc,tcc.p5g4a3,tcc.nam,tcc.g77,tcc.au,tcc.arab.league,tcc.oic,tcc.cis,tcc.g20,tcc.eu),
summarise,
n.missions = length(unique(mission)),
troops.sum = sum(troops,na.rm=TRUE),
troops.mean = mean(troops,na.rm=TRUE),
troops.med = median(troops,na.rm=TRUE),
troops.sd = sd(troops,na.rm=TRUE),
police.sum = sum(police,na.rm=TRUE),
police.mean = mean(police,na.rm=TRUE),
police.med = median(police,na.rm=TRUE),
police.sd = sd(police,na.rm=TRUE),
observers.sum = sum(observers,na.rm=TRUE),
observers.mean = mean(observers,na.rm=TRUE),
observers.med = median(observers,na.rm=TRUE),
observers.sd = sd(observers,na.rm=TRUE),
total.sum = sum(total,na.rm=TRUE),
total.mean = mean(total,na.rm=TRUE),
total.med = median(total,na.rm=TRUE),
total.sd = sd(total,na.rm=TRUE))
#remove 0's un troop, police, observers, and total columns
tmp <- data.full.tcc[,c(19,23,27,31)]
tmp[] <- lapply(tmp, function(x){replace(x, x == 0, NA)})
data.full.tcc[,c(19,23,27,31)] <- tmp
rm(tmp)
## Mission aggregation from full
data.full.mission <- ddply(data.full, .(date,mission,mission.country,mission.iso3.alpha,mission.hq,mission.hq.long,mission.hq.lat,mission.continent,mission.un.region,mission.nam,mission.g77,mission.au,mission.arab.league,mission.oic,mission.cis,mission.g20,mission.eu),
summarise,
n.contributors = length(unique(tcc)),
troops = sum(troops,na.rm=TRUE),
police = sum(police,na.rm=TRUE),
observers = sum(observers,na.rm=TRUE),
total = sum(total,na.rm=TRUE))
#replace 0's with NA's
data.full.mission[] <- lapply(data.full.mission, function(x){replace(x, x == 0, NA)})
## Regional deployments
data.full.mission.region <- ddply(data.full.mission, .(date,mission.continent,mission.un.region),summarise,
n.missions = length(unique(mission)),
troops = sum(troops,na.rm=TRUE),
police = sum(police,na.rm=TRUE),
observers = sum(observers,na.rm=TRUE),
total = sum(total,na.rm=TRUE))
# Africa
data.full.mission.region.africa <- data.full.mission.region[which(data.full.mission.region$mission.continent=='Africa'),]
data.full.mission.region.africa$mission.un.region <- as.character(data.full.mission.region.africa$mission.un.region)
data.full.mission.region.africa$mission.un.region = factor(data.full.mission.region.africa$mission.un.region,
levels=c('Northern Africa','Middle Africa','Western Africa','Eastern Africa'),
ordered=TRUE)
data.full.mission.region.africa$mission.continent <- as.character(data.full.mission.region.africa$mission.continent)
# Asia
data.full.mission.region.asia <- data.full.mission.region[which(data.full.mission.region$mission.continent=='Asia'),]
data.full.mission.region.asia$mission.un.region <- as.character(data.full.mission.region.asia$mission.un.region)
data.full.mission.region.asia$mission.un.region = factor(data.full.mission.region.asia$mission.un.region,
levels=c('Central Asia','Western Asia','Southern Asia','South-Eastern Asia'),
ordered=TRUE)
data.full.mission.region.asia$mission.continent <- as.character(data.full.mission.region.asia$mission.continent)
# Americas
data.full.mission.region.americas <- data.full.mission.region[which(data.full.mission.region$mission.continent=='South America' | data.full.mission.region$mission.continent=='North America'),]
data.full.mission.region.americas$mission.un.region <- as.character(data.full.mission.region.americas$mission.un.region)
data.full.mission.region.americas$mission.un.region <- as.factor(data.full.mission.region.americas$mission.un.region)
data.full.mission.region.americas$mission.continent <- as.character(data.full.mission.region.americas$mission.continent)
# Europe
data.full.mission.region.europe <- data.full.mission.region[which(data.full.mission.region$mission.continent=='Europe'),]
data.full.mission.region.europe$mission.un.region <- as.character(data.full.mission.region.europe$mission.un.region)
data.full.mission.region.europe$mission.un.region <- as.factor(data.full.mission.region.europe$mission.un.region)
data.full.mission.region.europe$mission.continent <- as.character(data.full.mission.region.europe$mission.continent)
## Continent deployments
data.full.mission.continent <- ddply(data.full.mission, .(date,mission.continent),summarise,
n.missions = length(unique(mission)),
troops = sum(troops,na.rm=TRUE),
police = sum(police,na.rm=TRUE),
observers = sum(observers,na.rm=TRUE),
total = sum(total,na.rm=TRUE))
## Summary from full aggregation
data.summary.monthly.full <- ddply(data.full, .(date), summarise,
n.conributors = length(unique(tcc)),
troops.sum = sum(troops,na.rm=TRUE),
troops.mean = mean(troops,na.rm=TRUE),
troops.med = median(troops,na.rm=TRUE),
troops.sd = sd(troops,na.rm=TRUE),
police.sum = sum(police,na.rm=TRUE),
police.mean = mean(police,na.rm=TRUE),
police.med = median(police,na.rm=TRUE),
police.sd = sd(police,na.rm=TRUE),
observers.sum = sum(observers,na.rm=TRUE),
observers.mean = mean(observers,na.rm=TRUE),
observers.med = median(observers,na.rm=TRUE),
observers.sd = sd(observers,na.rm=TRUE),
total.sum = sum(total,na.rm=TRUE),
total.mean = mean(total,na.rm=TRUE),
total.med = median(total,na.rm=TRUE),
total.sd = sd(total,na.rm=TRUE))
## Summary from full aspirant aggregation
data.summary.monthly.aspirant <- ddply(data.full, .(date,tcc.p5g4a3), summarise,
troops.sum = sum(troops,na.rm=TRUE),
troops.mean = mean(troops,na.rm=TRUE),
troops.med = median(troops,na.rm=TRUE),
troops.sd = sd(troops,na.rm=TRUE),
police.sum = sum(police,na.rm=TRUE),
police.mean = mean(police,na.rm=TRUE),
police.med = median(police,na.rm=TRUE),
police.sd = sd(police,na.rm=TRUE),
observers.sum = sum(observers,na.rm=TRUE),
observers.mean = mean(observers,na.rm=TRUE),
observers.med = median(observers,na.rm=TRUE),
observers.sd = sd(observers,na.rm=TRUE),
total.sum = sum(total,na.rm=TRUE),
total.mean = mean(total,na.rm=TRUE),
total.med = median(total,na.rm=TRUE),
total.sd = sd(total,na.rm=TRUE))
aspirant.cols <- c('date','grouping','Troops','troops.mean','troops.med','troops.sd','Police','police.mean','police.median','police.sd','Obvservers','obvservers.mean','obvservers.median','obvservers.sd','Total','total.mean','total.median','total.sd')
colnames(data.summary.monthly.aspirant) <- aspirant.cols
# #summary from tcc aggregation
data.summary.monthly.tcc <- ddply(data.full.tcc, .(date), summarise,
n.conributors = length(unique(tcc)),
troops = sum(troops.sum,na.rm=TRUE),
troops.mean = mean(troops.sum,na.rm=TRUE),
troops.med = median(troops.sum,na.rm=TRUE),
troops.sd = sd(troops.sum,na.rm=TRUE),
police = sum(police.sum,na.rm=TRUE),
police.mean = mean(police.sum,na.rm=TRUE),
police.med = median(police.sum,na.rm=TRUE),
police.sd = sd(police.sum,na.rm=TRUE),
observers = sum(observers.sum,na.rm=TRUE),
observers.mean = mean(observers.sum,na.rm=TRUE),
observers.med = median(observers.sum,na.rm=TRUE),
observers.se = sd(observers.sum,na.rm=TRUE),
total = sum(total.sum,na.rm=TRUE),
total.mean = mean(total.sum,na.rm=TRUE),
total.med = median(total.sum,na.rm=TRUE),
total.sd = sd(total.sum,na.rm=TRUE),
troops.gini = gini(!is.na(troops.sum)),
total.gini = gini(total.sum),
total.quint.first=sum(total.sum[total.sum <= quantile(total.sum,c(.2))]),
total.quint.second=sum(total.sum[total.sum <= quantile(total.sum,c(.4))]),
total.quint.third=sum(total.sum[total.sum <= quantile(total.sum,c(.6))]),
total.quint.fourth=sum(total.sum[total.sum <= quantile(total.sum,c(.8))]),
total.quint.fifth=sum(total.sum[total.sum <= quantile(total.sum,c(1))]))
data.summary.monthly.tcc <- ddply(data.full.tcc, .(date), summarise,
n.conributors = length(unique(tcc)),
troops = sum(troops.sum,na.rm=TRUE),
troops.mean = mean(troops.sum,na.rm=TRUE),
troops.med = median(troops.sum,na.rm=TRUE),
troops.sd = sd(troops.sum,na.rm=TRUE),
police = sum(police.sum,na.rm=TRUE),
police.mean = mean(police.sum,na.rm=TRUE),
police.med = median(police.sum,na.rm=TRUE),
police.sd = sd(police.sum,na.rm=TRUE),
observers = sum(observers.sum,na.rm=TRUE),
observers.mean = mean(observers.sum,na.rm=TRUE),
observers.med = median(observers.sum,na.rm=TRUE),
observers.se = sd(observers.sum,na.rm=TRUE),
total = sum(total.sum,na.rm=TRUE),
total.mean = mean(total.sum,na.rm=TRUE),
total.med = median(total.sum,na.rm=TRUE),
total.sd = sd(total.sum,na.rm=TRUE),
troops.gini = gini(!is.na(troops.sum)),
total.gini = gini(total.sum),
total.quint.first=sum(total.sum[total.sum <= quantile(total.sum,c(.2))]),
total.quint.second=sum(total.sum[total.sum <= quantile(total.sum,c(.4))]),
total.quint.third=sum(total.sum[total.sum <= quantile(total.sum,c(.6))]),
total.quint.fourth=sum(total.sum[total.sum <= quantile(total.sum,c(.8))]),
total.quint.fifth=sum(total.sum[total.sum <= quantile(total.sum,c(1))]))
